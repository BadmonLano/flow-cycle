<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flow Cycle Index Dashboard (@BadmonLano)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
  <style>
    body { 
      font-family: system-ui, -apple-system, sans-serif; 
      margin: 0; 
      background: #0d1117; 
      color: #c9d1d9; 
      line-height: 1.5; 
    }
    .main-title { 
      text-align: center; 
      color: #58a6ff; 
      margin: 20px 0 5px; 
      font-size: 2.5em; 
      font-weight: 700; 
    }
    .subtitle { 
      text-align: center; 
      color: #8b949e; 
      margin-bottom: 15px; 
      font-size: 1.1em; 
    }
    .container { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 20px; 
      max-width: 1400px; 
      margin: 0 auto; 
      padding: 0 15px; 
    }
    .chart-area { 
      flex: 3; 
      min-width: 600px; 
      height: 600px; 
      background: #161b22; 
      border-radius: 12px; 
      padding: 15px; 
      box-shadow: 0 8px 30px rgba(0,0,0,0.6); 
      position: relative; 
    }
    .time-buttons { 
      text-align: center; 
      margin-bottom: 10px; 
    }
    .time-btn { 
      background: #21262d; 
      color: #c9d1d9; 
      border: 1px solid #30363d; 
      padding: 6px 12px; 
      margin: 0 3px; 
      border-radius: 6px; 
      cursor: pointer; 
      transition: all 0.2s; 
    }
    .time-btn:hover, .time-btn.active { 
      background: #58a6ff; 
      color: white; 
      border-color: #58a6ff; 
    }
    .drawing-toolbar { 
      position: absolute; 
      left: 0; 
      top: 40px; 
      background: #21262d; 
      border-radius: 8px; 
      padding: 10px 5px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.5); 
      display: flex; 
      flex-direction: column; 
      gap: 10px; 
    }
    .tool-icon { 
      cursor: pointer; 
      font-size: 1.5em; 
      padding: 8px; 
      border-radius: 6px; 
      transition: all 0.2s; 
    }
    .tool-icon.active { background: #58a6ff; color: white; }
    .tool-icon:hover { background: #30363d; }
    .sidebar { 
      flex: 1; 
      min-width: 300px; 
      background: #161b22; 
      padding: 15px; 
      border-radius: 12px; 
      box-shadow: 0 8px 30px rgba(0,0,0,0.6); 
      overflow-y: auto; 
      max-height: 600px; 
    }
    .status-badge { 
      font-size: 2em; 
      margin: 0 0 15px; 
      padding: 10px; 
      border-radius: 8px; 
      text-align: center; 
      font-weight: 700; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.5); 
    }
    .price-item { 
      margin: 10px 0; 
      padding: 12px; 
      border-radius: 8px; 
      background: #21262d; 
      transition: all 0.2s; 
    }
    .price-item:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 6px 20px rgba(0,0,0,0.4); 
    }
    #alertBox, #actionAdvice, #previousCalls, #predictionAccuracy { 
      margin: 15px 0; 
      padding: 12px; 
      border-radius: 8px; 
      font-size: 1.1em; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.4); 
    }
    #actionAdvice { background: #2c0e0e; color: #ff6b6b; }
    #previousCalls { background: #161b22; border: 1px solid #30363d; }
    #predictionAccuracy { background: #161b22; border: 1px solid #30363d; text-align: center; }
    #confidenceGauge { width: 150px; height: 150px; margin: 20px auto; }
    .loading { color: #8b949e; text-align: center; margin: 15px 0; font-style: italic; }
    .collapsible-section { margin: 10px 0; }
    .collapsible-header { cursor: pointer; padding: 8px; background: #21262d; border-radius: 6px; font-weight: bold; transition: all 0.2s; }
    .collapsible-content { display: none; padding: 8px; background: #161b22; border-radius: 0 0 6px 6px; }
    .open .collapsible-content { display: block; }
    .phase-toggle { 
      background: #21262d; 
      color: #c9d1d9; 
      border: 1px solid #30363d; 
      padding: 10px 15px; 
      border-radius: 8px; 
      cursor: pointer; 
      margin-bottom: 15px; 
      transition: all 0.2s; 
    }
    .phase-toggle.active { background: #58a6ff; color: white; border-color: #58a6ff; }
    @media (max-width: 900px) { .container { flex-direction: column; } .sidebar { order: 2; } .chart-area { order: 1; height: 500px; } }
  </style>
</head>
<body>
  <h1 class="main-title">Flow Cycle Index Dashboard</h1>
  <p class="subtitle">One clean line tracks market flows â€” from bottoms to blow-offs</p>

  <div class="container">
    <div class="chart-area">
      <div class="time-buttons">
        <button class="time-btn" data-scale="15m">15m</button>
        <button class="time-btn" data-scale="1h">1h</button>
        <button class="time-btn" data-scale="4h">4h</button>
        <button class="time-btn active" data-scale="day">Daily</button>
        <button class="time-btn" data-scale="month">Monthly</button>
        <button class="time-btn" data-scale="year">Yearly</button>
      </div>
      <canvas id="myChart"></canvas>
    </div>

    <div class="sidebar">
      <div id="statusBadge" class="status-badge">Loading...</div>
      <div id="actionAdvice">What you should do right now: Loading...</div>
      <h3>Live Prices & Charts</h3>
      <div id="prices"><div class="loading">Loading live prices...</div></div>
      <div class="collapsible-section">
        <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">Previous Bottom Calls (click to expand)</div>
        <div id="previousBottoms" class="collapsible-content"><strong>Loading...</strong></div>
      </div>
      <div class="collapsible-section">
        <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">Previous Top Calls (click to expand)</div>
        <div id="previousTops" class="collapsible-content"><strong>Loading...</strong></div>
      </div>
    </div>
  </div>

  <div id="alertBox"></div>
  <div id="predictionsBox"></div>
  <div id="predictionAccuracy">Prediction vs Live: Updating...</div>

  <script>
    // === MAIN CHART ===
    const ctx = document.getElementById('myChart').getContext('2d');

    const labels = [
      '2017-01',
      '2017-10',
      '2017-12',
      '2018-12',
      '2020-03',
      '2021-11',
      '2022-11',
      '2025-04',
      '2025-11',
      '2026-01',
      '2026-04',
      '2026-07',
      '2026-10',
      '2027-01',
      '2027-04',
      '2027-07',
      '2025-12-01 00:00',
      '2025-12-01 01:00',
      '2025-12-01 02:00',
      '2025-12-01 03:00',
      '2025-12-01 04:00',
      '2025-12-01 05:00',
      '2025-12-01 06:00',
      '2025-12-01 07:00',
      '2025-12-01 08:00',
      '2025-12-01 09:00',
      '2025-12-01 10:00',
      '2025-12-01 11:00',
      '2025-12-01 12:00',
      '2025-12-01 13:00',
      '2025-12-01 14:00',
      '2025-12-01 15:00',
      '2025-12-01 16:00',
      '2025-12-01 17:00',
      '2025-12-01 18:00',
      '2025-12-01 19:00',
      '2025-12-01 20:00',
      '2025-12-01 21:00',
      '2025-12-01 22:00',
      '2025-12-01 23:00',
      '2025-12-02 00:00',
      '2025-12-02 01:00',
      '2025-12-02 02:00',
      '2025-12-02 03:00',
      '2025-12-02 04:00',
      '2025-12-02 05:00',
      '2025-12-02 06:00',
      '2025-12-02 07:00',
      '2025-12-02 08:00',
      '2025-12-02 09:00',
      '2025-12-02 10:00',
      '2025-12-02 11:00',
      '2025-12-02 12:00',
      '2025-12-02 13:00',
      '2025-12-02 14:00',
      '2025-12-02 15:00',
      '2025-12-02 16:00',
      '2025-12-02 17:00',
      '2025-12-02 18:00',
      '2025-12-02 19:00',
      '2025-12-02 20:00',
      '2025-12-02 21:00',
      '2025-12-02 22:00',
      '2025-12-02 23:00',
      '2025-12-03 00:00',
      '2025-12-03 01:00',
      '2025-12-03 02:00',
      '2025-12-03 03:00',
      '2025-12-03 04:00',
      '2025-12-03 05:00',
      '2025-12-03 06:00',
      '2025-12-03 07:00',
      '2025-12-03 08:00',
      '2025-12-03 09:00',
      '2025-12-03 10:00',
      '2025-12-03 11:00',
      '2025-12-03 12:00',
      '2025-12-03 13:00',
      '2025-12-03 14:00',
      '2025-12-03 15:00',
      '2025-12-03 16:00',
      '2025-12-03 17:00',
      '2025-12-03 18:00',
      '2025-12-03 19:00',
      '2025-12-03 20:00',
      '2025-12-03 21:00',
      '2025-12-03 22:00',
      '2025-12-03 23:00',
      '2025-12-04 00:00',
      '2025-12-04 01:00',
      '2025-12-04 02:00',
      '2025-12-04 03:00',
      '2025-12-04 04:00',
      '2025-12-04 05:00',
      '2025-12-04 06:00',
      '2025-12-04 07:00',
      '2025-12-04 08:00',
      '2025-12-04 09:00',
      '2025-12-04 10:00',
      '2025-12-04 11:00',
      '2025-12-04 12:00',
      '2025-12-04 13:00',
      '2025-12-04 14:00',
      '2025-12-04 15:00',
      '2025-12-04 16:00',
      '2025-12-04 17:00',
      '2025-12-04 18:00',
      '2025-12-04 19:00',
      '2025-12-04 20:00',
      '2025-12-04 21:00',
      '2025-12-04 22:00',
      '2025-12-04 23:00',
      '2025-12-05 00:00',
      '2025-12-05 01:00',
      '2025-12-05 02:00',
      '2025-12-05 03:00',
      '2025-12-05 04:00',
      '2025-12-05 05:00',
      '2025-12-05 06:00',
      '2025-12-05 07:00',
      '2025-12-05 08:00',
      '2025-12-05 09:00',
      '2025-12-05 10:00',
      '2025-12-05 11:00',
      '2025-12-05 12:00',
      '2025-12-05 13:00',
      '2025-12-05 14:00',
      '2025-12-05 15:00',
      '2025-12-05 16:00',
      '2025-12-05 17:00',
      '2025-12-05 18:00',
      '2025-12-05 19:00',
      '2025-12-05 20:00',
      '2025-12-05 21:00',
      '2025-12-05 22:00',
      '2025-12-05 23:00',
      '2025-12-06 00:00',
      '2025-12-06 01:00',
      '2025-12-06 02:00',
      '2025-12-06 03:00',
      '2025-12-06 04:00',
      '2025-12-06 05:00',
      '2025-12-06 06:00',
      '2025-12-06 07:00',
      '2025-12-06 08:00',
      '2025-12-06 09:00',
      '2025-12-06 10:00',
      '2025-12-06 11:00',
      '2025-12-06 12:00',
      '2025-12-06 13:00',
      '2025-12-06 14:00',
      '2025-12-06 15:00',
      '2025-12-06 16:00',
      '2025-12-06 17:00',
      '2025-12-06 18:00',
      '2025-12-06 19:00',
      '2025-12-06 20:00',
      '2025-12-06 21:00',
      '2025-12-06 22:00',
      '2025-12-06 23:00',
      '2025-12-07 00:00',
      '2025-12-07 01:00',
      '2025-12-07 02:00',
      '2025-12-07 03:00',
      '2025-12-07 04:00',
      '2025-12-07 05:00',
      '2025-12-07 06:00',
      '2025-12-07 07:00',
      '2025-12-07 08:00',
      '2025-12-07 09:00',
      '2025-12-07 10:00',
      '2025-12-07 11:00',
      '2025-12-07 12:00',
      '2025-12-07 13:00',
      '2025-12-07 14:00',
      '2025-12-07 15:00',
      '2025-12-07 16:00',
      '2025-12-07 17:00',
      '2025-12-07 18:00',
      '2025-12-07 19:00',
      '2025-12-07 20:00',
      '2025-12-07 21:00',
      '2025-12-07 22:00',
      '2025-12-07 23:00',
      '2025-12-08 00:00',
      '2025-12-08 01:00',
      '2025-12-08 02:00',
      '2025-12-08 03:00',
      '2025-12-08 04:00',
      '2025-12-08 05:00',
      '2025-12-08 06:00',
      '2025-12-08 07:00',
      '2025-12-08 08:00',
      '2025-12-08 09:00',
      '2025-12-08 10:00',
      '2025-12-08 11:00',
      '2025-12-08 12:00',
      '2025-12-08 13:00',
      '2025-12-08 14:00',
      '2025-12-08 15:00',
      '2025-12-08 16:00',
      '2025-12-08 17:00',
      '2025-12-08 18:00',
      '2025-12-08 19:00',
      '2025-12-08 20:00',
      '2025-12-08 21:00',
      '2025-12-08 22:00',
      '2025-12-08 23:00',
      '2025-12-09 00:00',
      '2025-12-09 01:00',
      '2025-12-09 02:00',
      '2025-12-09 03:00',
      '2025-12-09 04:00',
      '2025-12-09 05:00',
      '2025-12-09 06:00',
      '2025-12-09 07:00',
      '2025-12-09 08:00',
      '2025-12-09 09:00',
      '2025-12-09 10:00',
      '2025-12-09 11:00',
      '2025-12-09 12:00',
      '2025-12-09 13:00',
      '2025-12-09 14:00',
      '2025-12-09 15:00',
      '2025-12-09 16:00',
      '2025-12-09 17:00',
      '2025-12-09 18:00',
      '2025-12-09 19:00',
      '2025-12-09 20:00',
      '2025-12-09 21:00',
      '2025-12-09 22:00',
      '2025-12-09 23:00',
      '2025-12-10 00:00',
      '2025-12-10 01:00',
      '2025-12-10 02:00',
      '2025-12-10 03:00',
      '2025-12-10 04:00',
      '2025-12-10 05:00',
      '2025-12-10 06:00',
      '2025-12-10 07:00',
      '2025-12-10 08:00',
      '2025-12-10 09:00',
      '2025-12-10 10:00',
      '2025-12-10 11:00',
      '2025-12-10 12:00',
      '2025-12-10 13:00',
      '2025-12-10 14:00',
      '2025-12-10 15:00',
      '2025-12-10 16:00',
      '2025-12-10 17:00',
      '2025-12-10 18:00',
      '2025-12-10 19:00',
      '2025-12-10 20:00',
      '2025-12-10 21:00',
      '2025-12-10 22:00',
      '2025-12-10 23:00',
      '2025-12-11 00:00',
      '2025-12-11 01:00',
      '2025-12-11 02:00',
      '2025-12-11 03:00',
      '2025-12-11 04:00',
      '2025-12-11 05:00',
      '2025-12-11 06:00',
      '2025-12-11 07:00',
      '2025-12-11 08:00',
      '2025-12-11 09:00',
      '2025-12-11 10:00',
      '2025-12-11 11:00',
      '2025-12-11 12:00',
      '2025-12-11 13:00',
      '2025-12-11 14:00',
      '2025-12-11 15:00',
      '2025-12-11 16:00',
      '2025-12-11 17:00',
      '2025-12-11 18:00',
      '2025-12-11 19:00',
      '2025-12-11 20:00',
      '2025-12-11 21:00',
      '2025-12-11 22:00',
      '2025-12-11 23:00',
      '2025-12-12 00:00',
      '2025-12-12 01:00',
      '2025-12-12 02:00',
      '2025-12-12 03:00',
      '2025-12-12 04:00',
      '2025-12-12 05:00',
      '2025-12-12 06:00',
      '2025-12-12 07:00',
      '2025-12-12 08:00',
      '2025-12-12 09:00',
      '2025-12-12 10:00',
      '2025-12-12 11:00',
      '2025-12-12 12:00',
      '2025-12-12 13:00',
      '2025-12-12 14:00',
      '2025-12-12 15:00',
      '2025-12-12 16:00',
      '2025-12-12 17:00',
      '2025-12-12 18:00',
      '2025-12-12 19:00',
      '2025-12-12 20:00',
      '2025-12-12 21:00',
      '2025-12-12 22:00',
      '2025-12-12 23:00',
      '2025-12-13 00:00',
      '2025-12-13 01:00',
      '2025-12-13 02:00',
      '2025-12-13 03:00',
      '2025-12-13 04:00',
      '2025-12-13 05:00',
      '2025-12-13 06:00',
      '2025-12-13 07:00',
      '2025-12-13 08:00',
      '2025-12-13 09:00',
      '2025-12-13 10:00',
      '2025-12-13 11:00',
      '2025-12-13 12:00',
      '2025-12-13 13:00',
      '2025-12-13 14:00',
      '2025-12-13 15:00',
      '2025-12-13 16:00',
      '2025-12-13 17:00',
      '2025-12-13 18:00',
      '2025-12-13 19:00',
      '2025-12-13 20:00',
      '2025-12-13 21:00',
      '2025-12-13 22:00',
      '2025-12-13 23:00',
      '2025-12-14 00:00',
      '2025-12-14 01:00',
      '2025-12-14 02:00',
      '2025-12-14 03:00',
      '2025-12-14 04:00',
      '2025-12-14 05:00',
      '2025-12-14 06:00',
      '2025-12-14 07:00',
      '2025-12-14 08:00',
      '2025-12-14 09:00',
      '2025-12-14 10:00',
      '2025-12-14 11:00',
      '2025-12-14 12:00',
      '2025-12-14 13:00',
      '2025-12-14 14:00',
      '2025-12-14 15:00',
      '2025-12-14 16:00',
      '2025-12-14 17:00',
      '2025-12-14 18:00',
      '2025-12-14 19:00',
      '2025-12-14 20:00',
      '2025-12-14 21:00',
      '2025-12-14 22:00',
      '2025-12-14 23:00',
      '2025-12-15 00:00',
      '2025-12-15 01:00',
      '2025-12-15 02:00',
      '2025-12-15 03:00',
      '2025-12-15 04:00',
      '2025-12-15 05:00',
      '2025-12-15 06:00',
      '2025-12-15 07:00',
      '2025-12-15 08:00',
      '2025-12-15 09:00',
      '2025-12-15 10:00',
      '2025-12-15 11:00',
      '2025-12-15 12:00',
      '2025-12-15 13:00',
      '2025-12-15 14:00',
      '2025-12-15 15:00',
      '2025-12-15 16:00',
      '2025-12-15 17:00',
      '2025-12-15 18:00',
      '2025-12-15 19:00',
      '2025-12-15 20:00',
      '2025-12-15 21:00',
      '2025-12-15 22:00',
      '2025-12-15 23:00',
      '2025-12-16 00:00',
      '2025-12-16 01:00',
      '2025-12-16 02:00',
      '2025-12-16 03:00',
      '2025-12-16 04:00',
      '2025-12-16 05:00',
      '2025-12-16 06:00',
      '2025-12-16 07:00',
      '2025-12-16 08:00',
      '2025-12-16 09:00',
      '2025-12-16 10:00',
      '2025-12-16 11:00',
      '2025-12-16 12:00',
      '2025-12-16 13:00',
      '2025-12-16 14:00',
      '2025-12-16 15:00',
      '2025-12-16 16:00',
      '2025-12-16 17:00',
      '2025-12-16 18:00',
      '2025-12-16 19:00',
      '2025-12-16 20:00',
      '2025-12-16 21:00',
      '2025-12-16 22:00',
      '2025-12-16 23:00',
      '2025-12-17 00:00',
      '2025-12-17 01:00',
      '2025-12-17 02:00',
      '2025-12-17 03:00',
      '2025-12-17 04:00',
      '2025-12-17 05:00',
      '2025-12-17 06:00',
      '2025-12-17 07:00',
      '2025-12-17 08:00',
      '2025-12-17 09:00',
      '2025-12-17 10:00',
      '2025-12-17 11:00',
      '2025-12-17 12:00',
      '2025-12-17 13:00',
      '2025-12-17 14:00',
      '2025-12-17 15:00',
      '2025-12-17 16:00',
      '2025-12-17 17:00',
      '2025-12-17 18:00',
      '2025-12-17 19:00',
      '2025-12-17 20:00',
      '2025-12-17 21:00',
      '2025-12-17 22:00',
      '2025-12-17 23:00',
      '2025-12-18 00:00',
      '2025-12-18 01:00',
      '2025-12-18 02:00',
      '2025-12-18 03:00',
      '2025-12-18 04:00',
      '2025-12-18 05:00',
      '2025-12-18 06:00',
      '2025-12-18 07:00',
      '2025-12-18 08:00',
      '2025-12-18 09:00',
      '2025-12-18 10:00',
      '2025-12-18 11:00',
      '2025-12-18 12:00',
      '2025-12-18 13:00',
      '2025-12-18 14:00',
      '2025-12-18 15:00',
      '2025-12-18 16:00',
      '2025-12-18 17:00',
      '2025-12-18 18:00',
      '2025-12-18 19:00',
      '2025-12-18 20:00',
      '2025-12-18 21:00',
      '2025-12-18 22:00',
      '2025-12-18 23:00',
      '2025-12-19 00:00',
      '2025-12-19 01:00',
      '2025-12-19 02:00',
      '2025-12-19 03:00',
      '2025-12-19 04:00',
      '2025-12-19 05:00',
      '2025-12-19 06:00',
      '2025-12-19 07:00',
      '2025-12-19 08:00',
      '2025-12-19 09:00',
      '2025-12-19 10:00',
      '2025-12-19 11:00',
      '2025-12-19 12:00',
      '2025-12-19 13:00',
      '2025-12-19 14:00',
      '2025-12-19 15:00',
      '2025-12-19 16:00',
      '2025-12-19 17:00',
      '2025-12-19 18:00',
      '2025-12-19 19:00',
      '2025-12-19 20:00',
      '2025-12-19 21:00',
      '2025-12-19 22:00',
      '2025-12-19 23:00',
      '2025-12-20 00:00',
      '2025-12-20 01:00',
      '2025-12-20 02:00',
      '2025-12-20 03:00',
      '2025-12-20 04:00',
      '2025-12-20 05:00',
      '2025-12-20 06:00',
      '2025-12-20 07:00',
      '2025-12-20 08:00',
      '2025-12-20 09:00',
      '2025-12-20 10:00',
      '2025-12-20 11:00',
      '2025-12-20 12:00',
      '2025-12-20 13:00',
      '2025-12-20 14:00',
      '2025-12-20 15:00',
      '2025-12-20 16:00',
      '2025-12-20 17:00',
      '2025-12-20 18:00',
      '2025-12-20 19:00',
      '2025-12-20 20:00',
      '2025-12-20 21:00',
      '2025-12-20 22:00',
      '2025-12-20 23:00',
      '2025-12-21 00:00',
      '2025-12-21 01:00',
      '2025-12-21 02:00',
      '2025-12-21 03:00',
      '2025-12-21 04:00',
      '2025-12-21 05:00',
      '2025-12-21 06:00',
      '2025-12-21 07:00',
      '2025-12-21 08:00',
      '2025-12-21 09:00',
      '2025-12-21 10:00',
      '2025-12-21 11:00',
      '2025-12-21 12:00',
      '2025-12-21 13:00',
      '2025-12-21 14:00',
      '2025-12-21 15:00',
      '2025-12-21 16:00',
      '2025-12-21 17:00',
      '2025-12-21 18:00',
      '2025-12-21 19:00',
      '2025-12-21 20:00',
      '2025-12-21 21:00',
      '2025-12-21 22:00',
      '2025-12-21 23:00',
      '2025-12-22 00:00',
      '2025-12-22 01:00',
      '2025-12-22 02:00',
      '2025-12-22 03:00',
      '2025-12-22 04:00',
      '2025-12-22 05:00',
      '2025-12-22 06:00',
      '2025-12-22 07:00',
      '2025-12-22 08:00',
      '2025-12-22 09:00',
      '2025-12-22 10:00',
      '2025-12-22 11:00',
      '2025-12-22 12:00',
      '2025-12-22 13:00',
      '2025-12-22 14:00',
      '2025-12-22 15:00',
      '2025-12-22 16:00',
      '2025-12-22 17:00',
      '2025-12-22 18:00',
      '2025-12-22 19:00',
      '2025-12-22 20:00',
      '2025-12-22 21:00',
      '2025-12-22 22:00',
      '2025-12-22 23:00',
      '2025-12-23 00:00',
      '2025-12-23 01:00',
      '2025-12-23 02:00',
      '2025-12-23 03:00',
      '2025-12-23 04:00',
      '2025-12-23 05:00',
      '2025-12-23 06:00',
      '2025-12-23 07:00',
      '2025-12-23 08:00',
      '2025-12-23 09:00',
      '2025-12-23 10:00',
      '2025-12-23 11:00',
      '2025-12-23 12:00',
      '2025-12-23 13:00',
      '2025-12-23 14:00',
      '2025-12-23 15:00',
      '2025-12-23 16:00',
      '2025-12-23 17:00',
      '2025-12-23 18:00',
      '2025-12-23 19:00',
      '2025-12-23 20:00',
      '2025-12-23 21:00',
      '2025-12-23 22:00',
      '2025-12-23 23:00',
      '2025-12-24 00:00',
      '2025-12-24 01:00',
      '2025-12-24 02:00',
      '2025-12-24 03:00',
      '2025-12-24 04:00',
      '2025-12-24 05:00',
      '2025-12-24 06:00',
      '2025-12-24 07:00',
      '2025-12-24 08:00',
      '2025-12-24 09:00',
      '2025-12-24 10:00',
      '2025-12-24 11:00',
      '2025-12-24 12:00',
      '2025-12-24 13:00',
      '2025-12-24 14:00',
      '2025-12-24 15:00',
      '2025-12-24 16:00',
      '2025-12-24 17:00',
      '2025-12-24 18:00',
      '2025-12-24 19:00',
      '2025-12-24 20:00',
      '2025-12-24 21:00',
      '2025-12-24 22:00',
      '2025-12-24 23:00',
      '2025-12-25 00:00',
      '2025-12-25 01:00',
      '2025-12-25 02:00',
      '2025-12-25 03:00',
      '2025-12-25 04:00',
      '2025-12-25 05:00',
      '2025-12-25 06:00',
      '2025-12-25 07:00',
      '2025-12-25 08:00',
      '2025-12-25 09:00',
      '2025-12-25 10:00',
      '2025-12-25 11:00',
      '2025-12-25 12:00',
      '2025-12-25 13:00',
      '2025-12-25 14:00',
      '2025-12-25 15:00',
      '2025-12-25 16:00',
      '2025-12-25 17:00',
      '2025-12-25 18:00',
      '2025-12-25 19:00',
      '2025-12-25 20:00',
      '2025-12-25 21:00',
      '2025-12-25 22:00',
      '2025-12-25 23:00',
      '2025-12-26 00:00',
      '2025-12-26 01:00',
      '2025-12-26 02:00',
      '2025-12-26 03:00',
      '2025-12-26 04:00',
      '2025-12-26 05:00',
      '2025-12-26 06:00',
      '2025-12-26 07:00',
      '2025-12-26 08:00',
      '2025-12-26 09:00',
      '2025-12-26 10:00',
      '2025-12-26 11:00',
      '2025-12-26 12:00',
      '2025-12-26 13:00',
      '2025-12-26 14:00',
      '2025-12-26 15:00',
      '2025-12-26 16:00',
      '2025-12-26 17:00',
      '2025-12-26 18:00',
      '2025-12-26 19:00',
      '2025-12-26 20:00',
      '2025-12-26 21:00',
      '2025-12-26 22:00',
      '2025-12-26 23:00',
      '2025-12-27 00:00',
      '2025-12-27 01:00',
      '2025-12-27 02:00',
      '2025-12-27 03:00',
      '2025-12-27 04:00',
      '2025-12-27 05:00',
      '2025-12-27 06:00',
      '2025-12-27 07:00',
      '2025-12-27 08:00',
      '2025-12-27 09:00',
      '2025-12-27 10:00',
      '2025-12-27 11:00',
      '2025-12-27 12:00',
      '2025-12-27 13:00',
      '2025-12-27 14:00',
      '2025-12-27 15:00',
      '2025-12-27 16:00',
      '2025-12-27 17:00',
      '2025-12-27 18:00',
      '2025-12-27 19:00',
      '2025-12-27 20:00',
      '2025-12-27 21:00',
      '2025-12-27 22:00',
      '2025-12-27 23:00',
      '2025-12-28 00:00',
      '2025-12-28 01:00',
      '2025-12-28 02:00',
      '2025-12-28 03:00',
      '2025-12-28 04:00',
      '2025-12-28 05:00',
      '2025-12-28 06:00',
      '2025-12-28 07:00',
      '2025-12-28 08:00',
      '2025-12-28 09:00',
      '2025-12-28 10:00',
      '2025-12-28 11:00',
      '2025-12-28 12:00',
      '2025-12-28 13:00',
      '2025-12-28 14:00',
      '2025-12-28 15:00',
      '2025-12-28 16:00',
      '2025-12-28 17:00',
      '2025-12-28 18:00',
      '2025-12-28 19:00',
      '2025-12-28 20:00',
      '2025-12-28 21:00',
      '2025-12-28 22:00',
      '2025-12-28 23:00',
      '2025-12-29 00:00',
      '2025-12-29 01:00',
      '2025-12-29 02:00',
      '2025-12-29 03:00',
      '2025-12-29 04:00',
      '2025-12-29 05:00',
      '2025-12-29 06:00',
      '2025-12-29 07:00',
      '2025-12-29 08:00',
      '2025-12-29 09:00',
      '2025-12-29 10:00',
      '2025-12-29 11:00',
      '2025-12-29 12:00',
      '2025-12-29 13:00',
      '2025-12-29 14:00',
      '2025-12-29 15:00',
      '2025-12-29 16:00',
      '2025-12-29 17:00',
      '2025-12-29 18:00',
      '2025-12-29 19:00',
      '2025-12-29 20:00',
      '2025-12-29 21:00',
      '2025-12-29 22:00',
      '2025-12-29 23:00',
      '2025-12-30 00:00',
      '2025-12-30 01:00',
      '2025-12-30 02:00',
      '2025-12-30 03:00',
      '2025-12-30 04:00',
      '2025-12-30 05:00',
      '2025-12-30 06:00',
      '2025-12-30 07:00',
      '2025-12-30 08:00',
      '2025-12-30 09:00',
      '2025-12-30 10:00',
      '2025-12-30 11:00',
      '2025-12-30 12:00',
      '2025-12-30 13:00',
      '2025-12-30 14:00',
      '2025-12-30 15:00',
      '2025-12-30 16:00',
      '2025-12-30 17:00',
      '2025-12-30 18:00',
      '2025-12-30 19:00',
      '2025-12-30 20:00',
      '2025-12-30 21:00',
      '2025-12-30 22:00',
      '2025-12-30 23:00',
      '2025-12-31 00:00',
      '2025-12-31 01:00',
      '2025-12-31 02:00',
      '2025-12-31 03:00',
      '2025-12-31 04:00',
      '2025-12-31 05:00',
      '2025-12-31 06:00',
      '2025-12-31 07:00',
      '2025-12-31 08:00',
      '2025-12-31 09:00',
      '2025-12-31 10:00',
      '2025-12-31 11:00',
      '2025-12-31 12:00',
      '2025-12-31 13:00',
      '2025-12-31 14:00',
      '2025-12-31 15:00',
      '2025-12-31 16:00',
      '2025-12-31 17:00',
      '2025-12-31 18:00',
      '2025-12-31 19:00',
      '2025-12-31 20:00',
      '2025-12-31 21:00',
      '2025-12-31 22:00',
      '2025-12-31 23:00',
      '2026-01-01 00:00',
      '2026-01-01 01:00',
      '2026-01-01 02:00',
      '2026-01-01 03:00',
      '2026-01-01 04:00',
      '2026-01-01 05:00',
      '2026-01-01 06:00',
      '2026-01-01 07:00',
      '2026-01-01 08:00',
      '2026-01-01 09:00',
      '2026-01-01 10:00',
      '2026-01-01 11:00',
      '2026-01-01 12:00',
      '2026-01-01 13:00',
      '2026-01-01 14:00',
      '2026-01-01 15:00',
      '2026-01-01 16:00',
      '2026-01-01 17:00',
      '2026-01-01 18:00',
      '2026-01-01 19:00',
      '2026-01-01 20:00',
      '2026-01-01 21:00',
      '2026-01-01 22:00',
      '2026-01-01 23:00',
      '2027-10',
      '2028-01'
    ];

    const predictorIndex = [
      40.0,
      45.0,
      95.0,
      10.0,
      10.0,
      90.0,
      15.0,
      25.0,
      10.0,
      51.0,
      null,
      null,
      null,
      null,
      null,
      null,
      10.3,
      11.3,
      11.1,
      7.9,
      9.6,
      7.2,
      7.8,
      10.6,
      5.9,
      12.0,
      7.8,
      4.5,
      10.7,
      9.1,
      8.0,
      10.0,
      13.4,
      12.2,
      8.5,
      12.9,
      14.0,
      10.0,
      8.5,
      14.1,
      9.7,
      14.4,
      9.2,
      13.9,
      12.3,
      11.8,
      13.6,
      13.8,
      11.7,
      10.3,
      13.1,
      16.9,
      13.1,
      11.5,
      12.7,
      13.8,
      12.4,
      12.5,
      12.8,
      8.6,
      13.6,
      10.8,
      12.4,
      7.2,
      13.3,
      12.5,
      11.2,
      12.7,
      11.4,
      13.2,
      11.5,
      12.8,
      10.2,
      14.3,
      13.8,
      12.3,
      15.1,
      13.2,
      11.5,
      14.7,
      15.8,
      13.3,
      13.0,
      14.3,
      9.8,
      10.9,
      13.2,
      10.2,
      13.2,
      12.7,
      12.8,
      15.7,
      14.2,
      15.4,
      10.2,
      9.1,
      15.2,
      14.7,
      11.5,
      13.9,
      14.4,
      11.5,
      13.9,
      13.5,
      15.9,
      15.1,
      14.4,
      14.3,
      12.8,
      17.5,
      9.7,
      14.4,
      12.9,
      12.2,
      14.3,
      16.8,
      14.7,
      13.4,
      17.6,
      16.1,
      15.5,
      14.4,
      15.5,
      16.5,
      15.1,
      16.2,
      11.3,
      16.8,
      15.2,
      18.3,
      14.5,
      16.2,
      16.4,
      16.1,
      19.2,
      14.1,
      18.5,
      17.0,
      15.3,
      13.9,
      15.2,
      16.3,
      15.3,
      16.5,
      19.4,
      19.1,
      17.1,
      16.1,
      16.3,
      11.8,
      18.1,
      18.4,
      15.2,
      18.8,
      14.8,
      17.1,
      16.5,
      17.2,
      18.9,
      17.5,
      20.1,
      19.9,
      19.1,
      14.0,
      18.8,
      16.6,
      19.0,
      21.0,
      19.0,
      19.6,
      16.1,
      19.3,
      16.9,
      19.2,
      16.4,
      19.1,
      22.3,
      22.1,
      20.2,
      18.9,
      17.4,
      17.6,
      16.3,
      17.6,
      18.0,
      20.3,
      20.7,
      19.2,
      15.7,
      17.2,
      19.9,
      19.5,
      19.7,
      18.9,
      22.3,
      22.3,
      17.6,
      18.7,
      19.7,
      19.7,
      15.2,
      19.1,
      16.2,
      21.4,
      20.1,
      18.8,
      21.1,
      21.6,
      20.5,
      25.4,
      19.0,
      20.0,
      21.2,
      20.3,
      22.3,
      20.7,
      17.0,
      18.2,
      20.5,
      23.0,
      19.4,
      21.5,
      20.5,
      21.2,
      17.1,
      21.5,
      18.8,
      20.8,
      21.8,
      17.6,
      19.6,
      20.5,
      22.5,
      18.8,
      21.9,
      22.3,
      22.6,
      19.7,
      24.0,
      21.5,
      20.0,
      18.6,
      23.2,
      21.3,
      24.4,
      22.2,
      24.4,
      24.8,
      21.2,
      22.3,
      21.1,
      22.1,
      23.0,
      25.9,
      21.2,
      21.4,
      23.7,
      22.8,
      24.8,
      22.7,
      22.0,
      22.0,
      22.3,
      20.1,
      24.7,
      24.7,
      26.0,
      21.9,
      22.7,
      23.9,
      28.0,
      26.8,
      22.3,
      22.8,
      21.4,
      21.2,
      22.9,
      25.8,
      28.0,
      24.4,
      20.9,
      29.1,
      23.8,
      22.5,
      24.3,
      23.2,
      22.1,
      25.7,
      24.0,
      23.4,
      28.0,
      27.7,
      24.0,
      26.8,
      25.8,
      25.2,
      25.6,
      28.4,
      25.9,
      28.2,
      25.3,
      26.9,
      25.5,
      24.9,
      26.7,
      26.9,
      24.4,
      21.6,
      27.2,
      27.9,
      25.1,
      26.0,
      23.0,
      24.0,
      25.8,
      27.7,
      25.9,
      27.5,
      26.7,
      25.3,
      26.2,
      30.1,
      25.8,
      26.9,
      27.7,
      26.5,
      25.1,
      25.7,
      24.4,
      27.4,
      28.1,
      26.8,
      25.9,
      26.2,
      22.2,
      27.0,
      24.0,
      26.7,
      29.6,
      32.0,
      26.9,
      28.5,
      28.0,
      31.9,
      26.1,
      27.6,
      26.0,
      30.0,
      27.6,
      23.8,
      31.0,
      27.2,
      27.0,
      25.5,
      30.5,
      31.3,
      26.0,
      27.9,
      32.0,
      26.4,
      28.7,
      28.0,
      31.8,
      27.9,
      29.9,
      29.2,
      28.4,
      29.8,
      32.3,
      28.6,
      29.8,
      24.8,
      26.9,
      27.7,
      30.0,
      29.8,
      32.0,
      29.1,
      33.7,
      27.5,
      27.9,
      35.5,
      28.7,
      33.1,
      28.8,
      26.5,
      32.5,
      31.4,
      32.1,
      31.8,
      31.3,
      30.9,
      27.3,
      30.5,
      32.8,
      29.5,
      29.6,
      31.4,
      27.1,
      33.1,
      27.6,
      32.7,
      30.6,
      28.9,
      29.2,
      32.3,
      30.8,
      30.4,
      29.7,
      31.8,
      29.1,
      32.3,
      30.9,
      28.1,
      29.7,
      32.2,
      31.8,
      29.1,
      31.0,
      34.3,
      30.5,
      32.4,
      28.6,
      29.9,
      33.4,
      30.2,
      32.6,
      33.6,
      29.2,
      31.4,
      31.0,
      26.4,
      32.4,
      30.2,
      33.6,
      33.2,
      29.3,
      31.9,
      32.4,
      28.8,
      32.3,
      34.4,
      31.4,
      34.2,
      36.4,
      37.4,
      36.2,
      32.6,
      35.7,
      34.4,
      37.3,
      34.3,
      31.2,
      31.6,
      35.2,
      30.3,
      30.3,
      33.3,
      31.9,
      32.3,
      32.6,
      31.5,
      33.2,
      32.7,
      35.7,
      36.4,
      31.3,
      37.4,
      34.5,
      37.4,
      35.1,
      31.6,
      33.2,
      35.4,
      33.5,
      35.1,
      34.6,
      37.8,
      30.7,
      33.6,
      36.7,
      34.8,
      36.9,
      33.3,
      34.3,
      36.4,
      34.4,
      29.7,
      33.1,
      32.0,
      33.1,
      36.1,
      35.1,
      36.7,
      36.5,
      38.7,
      34.5,
      37.1,
      33.9,
      36.3,
      37.5,
      36.4,
      36.0,
      36.9,
      38.3,
      35.0,
      40.3,
      33.8,
      36.7,
      39.7,
      36.4,
      39.7,
      39.3,
      34.4,
      34.2,
      38.7,
      35.5,
      37.0,
      36.7,
      35.6,
      35.6,
      37.6,
      39.7,
      37.8,
      38.3,
      34.9,
      34.7,
      36.9,
      40.1,
      39.9,
      36.6,
      40.3,
      37.8,
      37.2,
      37.7,
      35.7,
      39.4,
      37.9,
      40.8,
      38.6,
      38.7,
      39.2,
      38.0,
      36.1,
      39.0,
      35.9,
      38.6,
      37.7,
      36.8,
      36.5,
      38.2,
      37.0,
      39.6,
      38.4,
      36.5,
      40.5,
      41.1,
      40.4,
      38.8,
      39.0,
      37.3,
      36.3,
      39.0,
      40.6,
      41.2,
      40.0,
      38.6,
      37.3,
      38.1,
      39.2,
      40.7,
      40.4,
      40.2,
      38.9,
      38.8,
      39.8,
      37.6,
      41.9,
      40.2,
      42.4,
      39.1,
      40.1,
      42.8,
      38.2,
      40.0,
      39.9,
      41.5,
      39.5,
      38.3,
      40.2,
      43.3,
      39.8,
      42.0,
      39.9,
      42.1,
      40.0,
      41.8,
      39.4,
      42.0,
      42.6,
      44.0,
      39.2,
      37.3,
      41.3,
      38.6,
      41.0,
      37.7,
      42.0,
      41.2,
      42.5,
      43.0,
      42.7,
      44.1,
      43.2,
      40.2,
      41.4,
      37.9,
      44.9,
      41.2,
      38.8,
      39.0,
      37.8,
      42.5,
      43.5,
      42.5,
      39.2,
      41.3,
      44.0,
      42.5,
      42.8,
      43.1,
      41.1,
      43.7,
      46.2,
      45.2,
      44.6,
      43.5,
      43.7,
      42.4,
      46.4,
      42.9,
      43.2,
      45.0,
      41.5,
      40.3,
      44.3,
      45.8,
      47.6,
      46.6,
      47.7,
      44.3,
      42.8,
      42.9,
      43.6,
      45.4,
      45.0,
      44.4,
      45.0,
      44.7,
      41.6,
      44.1,
      44.6,
      44.0,
      42.2,
      45.6,
      45.7,
      45.9,
      48.9,
      44.4,
      41.5,
      49.2,
      43.5,
      44.7,
      41.7,
      44.3,
      43.2,
      43.8,
      44.9,
      45.3,
      48.5,
      45.3,
      43.6,
      44.1,
      44.6,
      44.3,
      45.4,
      44.5,
      47.5,
      46.5,
      48.0,
      47.1,
      45.6,
      43.8,
      44.2,
      48.8,
      46.8,
      43.5,
      48.7,
      44.9,
      45.5,
      47.3,
      48.8,
      49.9,
      44.3,
      46.8,
      45.1,
      47.8,
      49.4,
      47.9,
      48.4,
      50.6,
      48.2,
      49.6,
      46.3,
      50.4,
      45.1,
      45.0,
      46.4,
      46.8,
      44.9,
      49.1,
      47.0,
      47.7,
      48.7,
      47.8,
      43.7,
      46.6,
      50.0,
      49.7,
      44.5,
      47.4,
      47.7,
      49.4,
      50.1,
      50.7,
      45.4,
      48.3,
      47.0,
      49.0,
      45.1,
      47.3,
      52.4,
      45.5,
      48.3,
      48.2,
      47.9,
      47.6,
      51.6,
      49.1,
      50.4,
      50.8,
      51.2,
      50.3,
      52.0,
      47.4,
      49.2,
      49.1,
      47.8,
      49.4,
      47.2,
      50.4,
      49.7,
      54.1,
      51.5,
      50.8,
      48.3,
      47.6,
      53.3,
      52.7,
      51.0,
      50.7,
      47.8,
      52.4,
      50.1,
      55.0,
      54.4,
      52.3,
      51.0,
      52.7,
      50.6,
      50.6,
      48.7,
      50.3,
      48.9,
      null,
      null
    ];

    let predictionData = [
      49.9,
      46.4,
      58.1,
      60.7,
      59.8,
      55.0,
      68.8,
      67.8,
      66.4,
      71.1,
      71.1,
      60.4,
      82.8,
      82.9,
      71.7,
      81.1,
      85.6,
      80.7,
      81.8,
      84.7,
      87.7,
      100.6,
      91.6,
      99.5
    ];

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          { label: 'Flow Cycle Index (Historical)', data: predictorIndex, borderColor: '#58a6ff', tension: 0.2, fill: false },
          { label: 'Predicted Index (2-Year Forecast)', data: predictionData, borderColor: '#8b949e', borderDash: [5, 5], opacity: 0.6, tension: 0.2, fill: false }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: { 
            type: 'time', 
            time: { unit: 'month' }, 
            ticks: { maxRotation: 45, autoSkip: true, maxTicksLimit: 12 },
            title: { display: true, text: 'Time' }
          },
          y: { min: 0, max: 100, title: { display: true, text: 'Flow Cycle Index' } }
        },
        plugins: {
          zoom: {
            zoom: {
              wheel: { enabled: true },
              pinch: { enabled: true },
              mode: 'xy'
            },
            pan: {
              enabled: true,
              mode: 'xy'
            }
          },
          crosshair: {
            line: {
              color: '#ffffff33',
              width: 1
            },
            sync: {
              enabled: true
            },
            zoom: {
              enabled: false
            }
          },
          annotation: {
            annotations: [
              { type: 'box', xMin: '2026-04', xMax: '2026-07', yMin: 80, yMax: 100, backgroundColor: 'rgba(255,0,0,0.15)', borderColor: 'red' },
              { type: 'label', content: 'Predicted Top Window', xValue: '2026-05', yValue: 90, backgroundColor: 'red', color: 'white' },
              { type: 'label', content: 'Bottom', xValue: '2025-11-22', yValue: 10, backgroundColor: 'green', color: 'white' }
            ]
          },
          tooltip: {
            enabled: true,
            mode: 'index',
            intersect: false,
            callbacks: {
              label: function(tooltipItem) {
                const value = tooltipItem.raw;
                let phase = 'Neutral';
                if (value < 20) phase = 'Panic/Capitulation';
                else if (value < 40) phase = 'Anger/Depression';
                else if (value < 60) phase = 'Disbelief/Hope';
                else if (value < 80) phase = 'Optimism/Belief';
                else phase = 'Thrill/Euphoria';
                return `Index: ${value} (${phase})`;
              }
            }
          }
        }
      }
    });

    // === LIVE PRICES ===
    async function fetchLiveData() {
      try {
        const cgRes = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bitcoin,ethereum,solana,bnb&order=market_cap_desc&per_page=4&page=1&sparkline=false&price_change_percentage=24h');
        const cgData = await cgRes.json();

        const pricesDiv = document.getElementById('prices');
        pricesDiv.innerHTML = '';

        const liveAssets = [
          { name: 'Bitcoin (BTC)', price: `$${cgData[0].current_price.toLocaleString()}`, change: `${cgData[0].price_change_percentage_24h.toFixed(2)}%`, link: 'https://coinmarketcap.com/currencies/bitcoin/' },
          { name: 'Ethereum (ETH)', price: `$${cgData[1].current_price.toLocaleString()}`, change: `${cgData[1].price_change_percentage_24h.toFixed(2)}%`, link: 'https://coinmarketcap.com/currencies/ethereum/' },
          { name: 'Solana (SOL)', price: `$${cgData[2].current_price.toLocaleString()}`, change: `${cgData[2].price_change_percentage_24h.toFixed(2)}%`, link: 'https://coinmarketcap.com/currencies/solana/' },
          { name: 'BNB (BNB)', price: `$${cgData[3].current_price.toLocaleString()}`, change: `${cgData[3].price_change_percentage_24h.toFixed(2)}%`, link: 'https://coinmarketcap.com/currencies/bnb/' }
        ];

        liveAssets.forEach(asset => {
          const div = document.createElement('div');
          div.className = 'price-item';
          div.innerHTML = `
            <strong>${asset.name}</strong><br>
            <span style="font-size:1.4em;">${asset.price}</span> 
            <span style="color:${asset.change.includes('+') ? '#56d364' : '#f85149'};">${asset.change}</span><br>
            <a href="${asset.link}" target="_blank">Live Chart â†’</a>
          `;
          pricesDiv.appendChild(div);
        });
      } catch (e) {
        document.getElementById('prices').innerHTML = '<p style="color:#f85149;">Live prices failed (refresh page)</p>';
      }
    }
    fetchLiveData();

    // === LOCALSTORAGE ===
    function saveCall(type, value) {
      const timestamp = new Date().toLocaleString();
      the callData = { type, timestamp, value };
      let calls = JSON.parse(localStorage.getItem('flowCalls')) || [];
      calls.unshift(callData);
      if (calls.length > 5) calls = calls.slice(0, 5);
      localStorage.setItem('flowCalls', JSON.stringify(calls));
      updatePreviousCalls();
    }

    function updatePreviousCalls() {
      const calls = JSON.parse(localStorage.getItem('flowCalls')) || [];
      const div = document.getElementById('previousCalls');
      div.innerHTML = '<strong>Previous Calls:</strong><br>';
      if (calls.length === 0) {
        div.innerHTML += 'No calls recorded yet.';
      } else {
        calls.forEach(call => {
          div.innerHTML += `<strong>${call.type} Call</strong>: ${call.timestamp} â€“ Index ${call.value}<br>`;
        });
      }
    }
    updatePreviousCalls();

    // === ALERTS & SELL ADVICE ===
    const currentIndex = predictorIndex[predictorIndex.length - 10];
    const alertBox = document.getElementById('alertBox');
    const actionAdvice = document.getElementById('actionAdvice');
    const statusBadge = document.getElementById('statusBadge');
    const predictionsBox = document.getElementById('predictionsBox');
    const predictionAccuracy = document.getElementById('predictionAccuracy');

    let msg = 'Current: Neutral flow.';
    let actionMsg = 'What you should do right now: Hold or buy dips.';
    let badge = 'ðŸŸ¡ WATCHING';
    let badgeColor = '#ffeb3b';
    let predictions = 'Predicted Top: Aprilâ€“July 2026 | Bottom: Augustâ€“November 2026';
    let accuracy = 'Prediction vs Live: No deviation yet (forecast to Jan 2028)';

    if (currentIndex < 30) {
      msg = 'Bottom Alert: Fear low â€“ like Nov 2025 â€“ buy time!';
      actionMsg = 'What you should do right now: Consider buying.';
      badge = 'ðŸŸ¢ BUY ZONE';
      badgeColor = '#4caf50';
      saveCall('Bottom', currentIndex);
    } else if (currentIndex > 90) {
      msg = 'Heavy Sell Alert: Euphoria peak â€“ full sell now!';
      actionMsg = 'What you should do right now: You should be 100% out now.';
      badge = 'ðŸ”´ FULL SELL';
      badgeColor = '#f44336';
      saveCall('Top', currentIndex);
    } else if (currentIndex > 80) {
      msg = 'Sell Alert: Euphoria building â€“ start selling.';
      actionMsg = 'What you should do right now: You should be 50â€“80% out now.';
      badge = 'ðŸŸ  START SELLING';
      badgeColor = '#ff9800';
      saveCall('Top Warning', currentIndex);
    }

    alertBox.innerHTML = `<strong>Flow Cycle Alert:</strong> ${msg}`;
    alertBox.style.background = badgeColor === '#4caf50' ? '#0e4429' : badgeColor === '#f44336' ? '#2c0e0e' : '#161b22';

    actionAdvice.innerHTML = actionMsg;
    actionAdvice.style.background = badgeColor === '#4caf50' ? '#0e4429' : badgeColor === '#f44336' ? '#2c0e0e' : '#161b22';

    statusBadge.innerHTML = badge;
    statusBadge.style.background = badgeColor;
    statusBadge.style.color = 'white';

    predictionsBox.innerHTML = `<strong>Current Predictions:</strong> ${predictions}`;

    predictionAccuracy.innerHTML = accuracy;
  </script>
</body>
</html>
